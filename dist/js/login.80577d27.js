"use strict";(self["webpackChunkcopa_bee"]=self["webpackChunkcopa_bee"]||[]).push([[535],{8393:function(e,t,l){l.r(t),l.d(t,{default:function(){return C}});var n=l(3396),a=l(7139);const o={class:"w-100 my-padding text-light",style:{background:"url('/img/loginBack.svg') top center no-repeat","background-size":"cover"}},s=(0,n._)("div",{class:"text-center"},[(0,n._)("img",{src:"/img/Beelogo.png",style:{width:"160px"},class:"my-5",alt:""})],-1),i=(0,n._)("h3",{class:"my-color my-3"},"ورود",-1),c={id:"mobileForm",class:"mb-3"},d=(0,n._)("label",{for:"mobile",class:"text-light mb-2 pointer"},"شماره تماس",-1),r={class:"d-flex bg-light"},m=(0,n._)("input",{id:"mobile",type:"number",maxlength:"11",minlength:"11",class:"en form-control bg-transparent border-0"},null,-1),u={class:"text-start"},g={class:"text-danger"},p={id:"codeForm",class:"row pb-4"},v=(0,n._)("p",{class:"text-light mt-5"},"کد تایید را وارد نمایید",-1),b={class:"d-flex justify-content-center mb-3",dir:"ltr"},x={class:"d-flex justify-content-center",style:{display:"grid",width:"93px",height:"85px",background:"url('/img/input.png') top center no-repeat","background-size":"100%"}},h={class:"d-flex justify-content-center",style:{display:"grid",width:"93px",height:"85px",background:"url('/img/input.png') top center no-repeat","background-size":"100%"}},y={class:"d-flex justify-content-center",style:{display:"grid",width:"93px",height:"85px",background:"url('/img/input.png') top center no-repeat","background-size":"100%"}},f={class:"d-flex justify-content-center",style:{display:"grid",width:"93px",height:"85px",background:"url('/img/input.png') top center no-repeat","background-size":"100%"}},I=(0,n._)("small",null,[(0,n.Uk)("دریافت مجدد کد در"),(0,n._)("span",{class:"my-color time"},"00:30")],-1),_=(0,n.uE)('<p class="mt-5">در صورت عدم ثبت اطلاعات خود، از راه های ارتباطی زیر اقدام نمایید</p><div dir="ltr"><div class="d-flex mb-2"><img src="/img/phoneLogo.png" class="mx-2" width="20px" alt=""><small>09300432833</small></div><div class="d-flex mb-2"><img src="/img/emailLogo.png" class="mx-2" width="20px" alt=""><small>copabee.example@gmail.com</small></div><div class="d-flex mb-2"><img src="/img/whatsappLogo.png" class="mx-2" width="20px" alt=""><small>09300432833</small></div></div>',2);function w(e,t,l,w,E,B){return(0,n.wg)(),(0,n.iD)("div",o,[s,i,(0,n._)("div",c,[d,(0,n._)("div",r,[(0,n._)("button",{class:"btn-code",onClick:t[0]||(t[0]=(...e)=>w.getCode&&w.getCode(...e))},"دریافت کد"),m])]),(0,n._)("div",u,[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(w.message,(e=>((0,n.wg)(),(0,n.iD)("li",g,[(0,n._)("small",null,(0,a.zw)(e),1)])))),256))]),(0,n._)("div",p,[v,(0,n._)("div",b,[(0,n._)("div",x,[(0,n._)("input",{type:"text",id:"code1",onInput:t[1]||(t[1]=e=>w.autoTab(e)),class:"w-100 align-self-center text-center bg-transparent border-0 text-light form-control",minLength:"1",maxLength:"1",min:"0",max:"9"},null,32)]),(0,n._)("div",h,[(0,n._)("input",{type:"text",id:"code2",onInput:t[2]||(t[2]=e=>w.autoTab(e)),class:"w-100 align-self-center text-center bg-transparent border-0 text-light form-control",minLength:"1",maxLength:"1",min:"0",max:"9"},null,32)]),(0,n._)("div",y,[(0,n._)("input",{type:"text",id:"code3",onInput:t[3]||(t[3]=e=>w.autoTab(e)),class:"w-100 align-self-center text-center bg-transparent border-0 text-light form-control",minLength:"1",maxLength:"1",min:"0",max:"9"},null,32)]),(0,n._)("div",f,[(0,n._)("input",{type:"text",id:"code4",onInput:t[4]||(t[4]=e=>w.autoTab(e)),class:"w-100 align-self-center text-center bg-transparent border-0 text-light form-control",minLength:"1",maxLength:"1",min:"0",max:"9"},null,32)])]),I]),_])}l(560);var E=l(4870),B=l(65),k={name:"Login",setup(){(0,n.bv)((()=>{localStorage.clear()}));const e=(0,B.oR)(),t=(0,E.iH)("user"),l=(0,E.iH)([]),a=(0,E.iH)([]),o=(0,E.iH)(),s=(0,E.iH)(59);(0,n.bv)((()=>{document.getElementById("code1").value="",document.getElementById("code2").value="",document.getElementById("code3").value="",document.getElementById("code4").value=""}));const i=()=>{a.value=[],o.value=document.getElementById("mobile").value,0===o.value.length?a.value.push("لطفا شماره موبایل را وارد کنید"):(o.value.length<11&&a.value.push("شماره موبایل باید 11 رقم باشد"),o.value.startsWith("09")||a.value.push("شماره موبایل باید با 09 شروع شود")),11===o.value.length&&o.value.startsWith("09")&&(a.value=[],axios.post("/api/otp/mobile",{mobile:document.getElementById("mobile").value,scope:"user"},{progress:!1}).then((e=>{200===e.status?(document.getElementById("mobileForm").classList.add("d-none"),document.getElementById("codeForm").classList.remove("d-none")):console.log(e)})).then((()=>{document.getElementById("resend").setAttribute("disabled","disabled"),r(),setTimeout((()=>{document.getElementById("resend").removeAttribute("disabled")}),6e4)})).catch((e=>{a.value=e.response.data.message})))},c=()=>{location.reload()},d=()=>{i()},r=()=>{var e=59,t=null;clearInterval(t),s.value=0,t=setInterval((function(){e--,s.value=e;var l=s.value<10?"0":"";document.getElementById("time").innerHTML=l+s.value,e<1&&clearInterval(t)}),1e3),s.value=0},m=e=>{let t=document.getElementById("code1").value+document.getElementById("code2").value+document.getElementById("code3").value+document.getElementById("code4").value;4===t.length&&axios.post("/api/mobile/login",{mobile:document.getElementById("mobile").value,scope:"user",password:document.getElementById("code1").value+document.getElementById("code2").value+document.getElementById("code3").value+document.getElementById("code4").value}).then((e=>{200===e.status?(localStorage.setItem("user",JSON.stringify(e.data.user)),localStorage.setItem("token",JSON.stringify(e.data.access_token)),localStorage.setItem("scope",JSON.stringify(e.data.scope)),localStorage.setItem("expire",JSON.stringify(e.data.expire)),console.log(localStorage),window.location="/"):console.log(e)})).catch((e=>{a.value=e.response.data.message})),e.target.value.length===e.target.maxLength&&e.target.parentElement.nextElementSibling?.firstChild?.focus()};return{autoTab:m,getCode:i,scope:t,message:a,mobile:o,counter:r,time:s,resend:d,editNumber:c,errors:l,store:e}}},L=l(89);const S=(0,L.Z)(k,[["render",w]]);var C=S}}]);
//# sourceMappingURL=login.80577d27.js.map