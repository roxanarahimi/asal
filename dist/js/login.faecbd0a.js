"use strict";(self["webpackChunkcopa_bee"]=self["webpackChunkcopa_bee"]||[]).push([[535],{6460:function(e,t,n){n.r(t),n.d(t,{default:function(){return J}});var l=n(3396),a=n(7139),o=n(9242);const s={class:"w-100 my-padding text-light",style:{background:"url('/img/loginBack.svg') top center no-repeat","background-size":"cover"}},r=(0,l._)("div",{class:"text-center"},[(0,l._)("img",{src:"/img/Beelogo.png",style:{width:"160px"},class:"my-5",alt:""})],-1),i=(0,l._)("h3",{class:"my-color my-3"},"ورود",-1),c={id:"mobileForm",class:"mb-3"},d=(0,l._)("label",{for:"mobile",class:"text-light mb-2 pointer"},"شماره تماس",-1),u={class:"d-flex bg-light"},m=(0,l._)("input",{id:"mobile",type:"number",maxlength:"11",minlength:"11",class:"en form-control bg-transparent border-0"},null,-1),g={class:"text-start mt-2"},p={class:"error"},b={class:"my-5 text-center py-5"},v=(0,l._)("br",null,null,-1),y={id:"codeForm",class:"row pb-4 d-none"},h=(0,l._)("p",{class:"text-light mt-5"},"کد تایید را وارد نمایید",-1),x={class:"d-flex justify-content-center mb-3",dir:"ltr"},f={class:"d-flex justify-content-center",style:{display:"grid",width:"93px",height:"85px",background:"url('/img/input.png') top center no-repeat","background-size":"100%"}},_={class:"d-flex justify-content-center",style:{display:"grid",width:"93px",height:"85px",background:"url('/img/input.png') top center no-repeat","background-size":"100%"}},I={class:"d-flex justify-content-center",style:{display:"grid",width:"93px",height:"85px",background:"url('/img/input.png') top center no-repeat","background-size":"100%"}},w={class:"d-flex justify-content-center",style:{display:"grid",width:"93px",height:"85px",background:"url('/img/input.png') top center no-repeat","background-size":"100%"}},k={class:"text-start my-2"},B={class:"error"},E={id:"time-section",class:"d-flex"},L=(0,l._)("span",{id:"resend"},"دریافت مجدد کد در",-1),H=(0,l._)("span",{id:"time",style:{width:"30px !important","text-align":"left"},class:"my-color time"},null,-1),S={key:0,class:"d-flex justify-content-center"},z=(0,l._)("button",{class:"btn-orange2"},"دریافت مجدد کد",-1),C=[z];function T(e,t,n,z,T,j){const D=(0,l.up)("router-link");return(0,l.wg)(),(0,l.iD)("div",s,[r,i,(0,l._)("div",c,[d,(0,l._)("div",u,[(0,l._)("button",{class:"btn-code",onClick:t[0]||(t[0]=(...e)=>z.getCode&&z.getCode(...e))},"دریافت کد"),m]),(0,l._)("div",g,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(z.message,(e=>((0,l.wg)(),(0,l.iD)("li",p,[(0,l._)("span",null,(0,a.zw)(e),1)])))),256))]),(0,l._)("p",b,[(0,l.Uk)("حساب کاربری ندارید؟ "),v,(0,l.Wm)(D,{to:"/register",class:"my-color"},{default:(0,l.w5)((()=>[(0,l.Uk)("ثبت نام")])),_:1}),(0,l.Uk)(" کنید")])]),(0,l._)("div",y,[h,(0,l._)("div",x,[(0,l._)("div",f,[(0,l._)("input",{type:"text",id:"code1",onInput:t[1]||(t[1]=e=>z.autoTab(e)),class:"w-100 align-self-center text-center bg-transparent border-0 text-light form-control",minLength:"1",maxLength:"1",min:"0",max:"9"},null,32)]),(0,l._)("div",_,[(0,l._)("input",{type:"text",id:"code2",onInput:t[2]||(t[2]=e=>z.autoTab(e)),class:"w-100 align-self-center text-center bg-transparent border-0 text-light form-control",minLength:"1",maxLength:"1",min:"0",max:"9"},null,32)]),(0,l._)("div",I,[(0,l._)("input",{type:"text",id:"code3",onInput:t[3]||(t[3]=e=>z.autoTab(e)),class:"w-100 align-self-center text-center bg-transparent border-0 text-light form-control",minLength:"1",maxLength:"1",min:"0",max:"9"},null,32)]),(0,l._)("div",w,[(0,l._)("input",{type:"text",id:"code4",onInput:t[4]||(t[4]=e=>z.autoTab(e)),class:"w-100 align-self-center text-center bg-transparent border-0 text-light form-control",minLength:"1",maxLength:"1",min:"0",max:"9"},null,32)])]),(0,l._)("div",k,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(z.message,(e=>((0,l.wg)(),(0,l.iD)("li",B,[(0,l._)("span",null,(0,a.zw)(e),1)])))),256))]),(0,l.wy)((0,l._)("small",E,[L,H,(0,l.Uk)(" :00 ")],512),[[o.F8,"00"!=z.time]]),"00"==z.time?((0,l.wg)(),(0,l.iD)("div",S,C)):(0,l.kq)("",!0)])])}n(560);var j=n(4870),D=n(65),F={name:"Login",setup(){(0,l.bv)((()=>{}));const e=(0,D.oR)(),t=(0,j.iH)("user"),n=(0,j.iH)([]),a=(0,j.iH)([]),o=(0,j.iH)(),s=(0,j.iH)(59);(0,l.bv)((()=>{document.getElementById("code1").value="",document.getElementById("code2").value="",document.getElementById("code3").value="",document.getElementById("code4").value=""}));const r=()=>{a.value=[],o.value=document.getElementById("mobile").value,0===o.value.length?a.value.push("لطفا شماره موبایل را وارد کنید"):(o.value.length<11&&a.value.push("شماره موبایل باید 11 رقم باشد"),o.value.startsWith("09")||a.value.push("شماره موبایل باید با 09 شروع شود")),11===o.value.length&&o.value.startsWith("09")&&(a.value=[],axios.post("https://panel.asal.webagent.ir/api/otp/mobile",{mobile:document.getElementById("mobile").value,scope:"user"},{progress:!1}).then((e=>{200===e.status?(document.getElementById("mobileForm").classList.add("d-none"),document.getElementById("codeForm").classList.remove("d-none")):console.log(e)})).then((()=>{document.getElementById("resend").setAttribute("disabled","disabled"),d(),setTimeout((()=>{document.getElementById("resend").removeAttribute("disabled")}),6e4)})).catch((e=>{console.error(e),a.value=e.response.data.message})))},i=()=>{location.reload()},c=()=>{r()},d=()=>{var e=59,t=null;clearInterval(t),s.value=0,t=setInterval((function(){e--,s.value=e;var n=s.value<10?"0":"";document.getElementById("time").innerHTML=n+s.value,e<1&&clearInterval(t)}),1e3),s.value=0},u=e=>{let t=document.getElementById("code1").value+document.getElementById("code2").value+document.getElementById("code3").value+document.getElementById("code4").value;4===t.length&&axios.post("https://panel.asal.webagent.ir/api/mobile/login",{mobile:document.getElementById("mobile").value,scope:"user",password:document.getElementById("code1").value+document.getElementById("code2").value+document.getElementById("code3").value+document.getElementById("code4").value}).then((e=>{200===e.status?(localStorage.setItem("user",JSON.stringify(e.data.user)),localStorage.setItem("token",JSON.stringify(e.data.access_token)),localStorage.setItem("expire",JSON.stringify(e.data.expire)),window.location="/profile"):console.log(e)})).catch((e=>{a.value=e.response.data.message})),e.target.value.length===e.target.maxLength&&e.target.parentElement.nextElementSibling?.firstChild?.focus()};return(0,l.bv)((()=>{console.log(localStorage)})),{autoTab:u,getCode:r,scope:t,message:a,mobile:o,counter:d,time:s,resend:c,editNumber:i,errors:n,store:e}}},N=n(89);const U=(0,N.Z)(F,[["render",T]]);var J=U}}]);
//# sourceMappingURL=login.faecbd0a.js.map