"use strict";(self["webpackChunkcopa_bee"]=self["webpackChunkcopa_bee"]||[]).push([[535],{1913:function(e,t,n){n.r(t),n.d(t,{default:function(){return C}});var l=n(3396),a=n(7139);const o={class:"w-100 my-padding text-light",style:{background:"url('/img/loginBack.svg') top center no-repeat","background-size":"cover"}},s=(0,l._)("div",{class:"text-center"},[(0,l._)("img",{src:"/img/Beelogo.png",style:{width:"160px"},class:"my-5",alt:""})],-1),r=(0,l._)("h3",{class:"my-color my-3"},"ورود",-1),i={id:"mobileForm",class:"mb-3"},c=(0,l._)("label",{for:"mobile",class:"text-light mb-2 pointer"},"شماره تماس",-1),d={class:"d-flex bg-light"},u=(0,l._)("input",{id:"mobile",type:"number",maxlength:"11",minlength:"11",class:"en form-control bg-transparent border-0"},null,-1),g={id:"codeForm",class:"row pb-4 d-none"},m=(0,l._)("p",{class:"text-light mt-5"},"کد تایید را وارد نمایید",-1),p={class:"d-flex justify-content-center mb-3",dir:"ltr"},b={class:"d-flex justify-content-center",style:{display:"grid",width:"93px",height:"85px",background:"url('/img/input.png') top center no-repeat","background-size":"100%"}},v={class:"d-flex justify-content-center",style:{display:"grid",width:"93px",height:"85px",background:"url('/img/input.png') top center no-repeat","background-size":"100%"}},h={class:"d-flex justify-content-center",style:{display:"grid",width:"93px",height:"85px",background:"url('/img/input.png') top center no-repeat","background-size":"100%"}},x={class:"d-flex justify-content-center",style:{display:"grid",width:"93px",height:"85px",background:"url('/img/input.png') top center no-repeat","background-size":"100%"}},y=(0,l._)("small",{class:"d-flex"},[(0,l._)("span",{id:"resend"},"دریافت مجدد کد در"),(0,l._)("span",{id:"time",style:{width:"35px !important","text-align":"center"},class:"my-color time"}),(0,l.Uk)(" ثانیه ")],-1),f={class:"text-start"},I={class:"error"},_={class:"mt-5"};function w(e,t,n,w,k,B){const E=(0,l.up)("router-link");return(0,l.wg)(),(0,l.iD)("div",o,[s,r,(0,l._)("div",i,[c,(0,l._)("div",d,[(0,l._)("button",{class:"btn-code",onClick:t[0]||(t[0]=(...e)=>w.getCode&&w.getCode(...e))},"دریافت کد"),u])]),(0,l._)("div",g,[m,(0,l._)("div",p,[(0,l._)("div",b,[(0,l._)("input",{type:"text",id:"code1",onInput:t[1]||(t[1]=e=>w.autoTab(e)),class:"w-100 align-self-center text-center bg-transparent border-0 text-light form-control",minLength:"1",maxLength:"1",min:"0",max:"9"},null,32)]),(0,l._)("div",v,[(0,l._)("input",{type:"text",id:"code2",onInput:t[2]||(t[2]=e=>w.autoTab(e)),class:"w-100 align-self-center text-center bg-transparent border-0 text-light form-control",minLength:"1",maxLength:"1",min:"0",max:"9"},null,32)]),(0,l._)("div",h,[(0,l._)("input",{type:"text",id:"code3",onInput:t[3]||(t[3]=e=>w.autoTab(e)),class:"w-100 align-self-center text-center bg-transparent border-0 text-light form-control",minLength:"1",maxLength:"1",min:"0",max:"9"},null,32)]),(0,l._)("div",x,[(0,l._)("input",{type:"text",id:"code4",onInput:t[4]||(t[4]=e=>w.autoTab(e)),class:"w-100 align-self-center text-center bg-transparent border-0 text-light form-control",minLength:"1",maxLength:"1",min:"0",max:"9"},null,32)])]),y]),(0,l._)("div",f,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(w.message,(e=>((0,l.wg)(),(0,l.iD)("li",I,[(0,l._)("span",null,(0,a.zw)(e),1)])))),256))]),(0,l._)("p",_,[(0,l.Uk)("در صورت عدم ثبت اطلاعات خود، لطفا اینجا "),(0,l.Wm)(E,{to:"/register",class:"text-info"},{default:(0,l.w5)((()=>[(0,l.Uk)("ثبت نام")])),_:1}),(0,l.Uk)(" کنید")])])}n(560);var k=n(4870),B=n(65),E={name:"Login",setup(){(0,l.bv)((()=>{}));const e=(0,B.oR)(),t=(0,k.iH)("user"),n=(0,k.iH)([]),a=(0,k.iH)([]),o=(0,k.iH)(),s=(0,k.iH)(59);(0,l.bv)((()=>{document.getElementById("code1").value="",document.getElementById("code2").value="",document.getElementById("code3").value="",document.getElementById("code4").value=""}));const r=()=>{a.value=[],o.value=document.getElementById("mobile").value,0===o.value.length?a.value.push("لطفا شماره موبایل را وارد کنید"):(o.value.length<11&&a.value.push("شماره موبایل باید 11 رقم باشد"),o.value.startsWith("09")||a.value.push("شماره موبایل باید با 09 شروع شود")),11===o.value.length&&o.value.startsWith("09")&&(a.value=[],axios.post("https://panel.asal.webagent.ir/api/otp/mobile",{mobile:document.getElementById("mobile").value,scope:"user"},{progress:!1}).then((e=>{200===e.status?(document.getElementById("mobileForm").classList.add("d-none"),document.getElementById("codeForm").classList.remove("d-none")):console.log(e)})).then((()=>{document.getElementById("resend").setAttribute("disabled","disabled"),d(),setTimeout((()=>{document.getElementById("resend").removeAttribute("disabled")}),6e4)})).catch((e=>{console.error(e),a.value=e.response.data.message})))},i=()=>{location.reload()},c=()=>{r()},d=()=>{var e=59,t=null;clearInterval(t),s.value=0,t=setInterval((function(){e--,s.value=e;var n=s.value<10?"0":"";document.getElementById("time").innerHTML=n+s.value,e<1&&clearInterval(t)}),1e3),s.value=0},u=e=>{let t=document.getElementById("code1").value+document.getElementById("code2").value+document.getElementById("code3").value+document.getElementById("code4").value;4===t.length&&axios.post("https://panel.asal.webagent.ir/api/mobile/login",{mobile:document.getElementById("mobile").value,scope:"user",password:document.getElementById("code1").value+document.getElementById("code2").value+document.getElementById("code3").value+document.getElementById("code4").value}).then((e=>{200===e.status?(localStorage.setItem("user",JSON.stringify(e.data.user)),localStorage.setItem("token",JSON.stringify(e.data.access_token)),localStorage.setItem("expire",JSON.stringify(e.data.expire)),window.location="/profile"):console.log(e)})).catch((e=>{a.value=e.response.data.message})),e.target.value.length===e.target.maxLength&&e.target.parentElement.nextElementSibling?.firstChild?.focus()};return(0,l.bv)((()=>{console.log(localStorage)})),{autoTab:u,getCode:r,scope:t,message:a,mobile:o,counter:d,time:s,resend:c,editNumber:i,errors:n,store:e}}},L=n(89);const S=(0,L.Z)(E,[["render",w]]);var C=S}}]);
//# sourceMappingURL=login.58cc941d.js.map