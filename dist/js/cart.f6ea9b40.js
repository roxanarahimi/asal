"use strict";(self["webpackChunkcopa_bee"]=self["webpackChunkcopa_bee"]||[]).push([[511],{9345:function(e,t,a){a.r(t),a.d(t,{default:function(){return E}});var o=a(3396),s=a(7139);const l=e=>((0,o.dD)("data-v-3beeb07e"),e=e(),(0,o.Cn)(),e),c={class:"w-100 px-4 text-light",style:{background:"url('/img/loginBack.svg') top center no-repeat","background-size":"cover"}},i=l((()=>(0,o._)("h2",{class:"my-color mt-5 text-center my-font"},"سبد خرید",-1))),n={key:0,class:"px-4 mt-5 my-font",style:{}},r={class:"mb-3"},d={class:"d-flex justify-content-between"},m={key:0},u={key:1},p=["onClick"],y=l((()=>(0,o._)("div",{class:"text-center"},[(0,o._)("img",{src:"/img/hr.png",class:"w-100",alt:""})],-1))),v={key:1,class:"my-5"},g={class:"d-flex justify-content-center my-font my-5"},b=l((()=>(0,o._)("i",{class:"bi bi-plus"},null,-1))),h={key:2},w={class:"my-border mt-5 p-3 text-center"},_={class:"d-flex justify-content-between mt-5"},k=l((()=>(0,o._)("p",{class:"mb-0 my-color mt-2"},"نحوه تسویه",-1))),f={class:"d-flex"},x={class:"d-flex mt-5 justify-content-center"},z={class:"modal fade",id:"remove-order-item-modal","data-bs-backdrop":"static","data-bs-keyboard":"false",tabindex:"-1","aria-labelledby":"staticBackdropLabel","aria-hidden":"true"},R={class:"modal-dialog modal-dialog-centered"},D={class:"modal-content"},C={class:"modal-body text-center"},P={class:"text-center"},I={key:0},U={key:1},q=l((()=>(0,o._)("p",{class:"text-center"},"حذف شود؟",-1))),O={class:"d-flex justify-content-around"},S=l((()=>(0,o._)("button",{type:"button",class:"btn-orange-rect my-3",style:{width:"100px",height:"40px"},"data-bs-dismiss":"modal"},"انصراف",-1)));function j(e,t,a,l,j,H){const L=(0,o.up)("router-link");return(0,o.wg)(),(0,o.iD)(o.HY,null,[(0,o._)("div",c,[i,l.data?.items?.length?((0,o.wg)(),(0,o.iD)("div",n,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(l.data.items,(e=>((0,o.wg)(),(0,o.iD)("div",r,[(0,o._)("div",d,[(0,o._)("h5",null,[(0,o.Uk)((0,s.zw)(e.product.category.title)+" "+(0,s.zw)(e.product.title)+" "+(0,s.zw)(e.size.size)+" "+(0,s.zw)(e.quantity)+" ",1),"فله"==e.size.size?((0,o.wg)(),(0,o.iD)("span",m,"کیلو")):((0,o.wg)(),(0,o.iD)("span",u,"بسته"))]),(0,o._)("div",null,[(0,o._)("img",{onClick:t=>l.showRemoveItemModal(e),src:"/img/minus.png",alt:""},null,8,p)])]),y])))),256))])):((0,o.wg)(),(0,o.iD)("div",v,"سبد شما خالی است")),(0,o._)("div",g,[(0,o.Wm)(L,{to:"/products",class:"btn-orangePill text-black"},{default:(0,o.w5)((()=>[b,(0,o.Uk)("افزودن محصول ")])),_:1})]),l.data?.items?.length?((0,o.wg)(),(0,o.iD)("div",h,[(0,o._)("div",w,[(0,o._)("h4",null," مبلغ نهایی: "+(0,s.zw)(l.data?.amount)+" ریال",1),(0,o._)("h4",null," تخفیف ریالی: "+(0,s.zw)(l.data?.off||0)+" ریال",1)]),(0,o._)("div",_,[k,(0,o._)("div",f,[(0,o._)("button",{onClick:t[0]||(t[0]=e=>l.paymentToggle(1)),id:"cash",class:(0,s.C_)(["paymentRadio me-3",{activePaymentRadio:"cash"==l.pay}]),style:{width:"80px !important"}},"نقدی ",2),(0,o._)("button",{onClick:t[1]||(t[1]=e=>l.paymentToggle(2)),id:"check",class:(0,s.C_)(["paymentRadio",{activePaymentRadio:"check"==l.pay}]),style:{width:"80px !important"}},"چک ",2)])]),(0,o._)("div",x,[(0,o._)("button",{class:"btn-orange2",onClick:t[2]||(t[2]=(...e)=>l.confirmOrder&&l.confirmOrder(...e))},"ثبت سفارش")])])):(0,o.kq)("",!0)]),(0,o._)("div",z,[(0,o._)("div",R,[(0,o._)("div",D,[(0,o._)("div",C,[(0,o._)("p",P,[(0,o.Uk)(" ( "+(0,s.zw)(l.remove?.product?.category.title)+" "+(0,s.zw)(l.remove?.product?.title)+" "+(0,s.zw)(l.remove?.size?.size)+" "+(0,s.zw)(l.remove?.quantity)+" ",1),"فله"==l.remove?.size?.size?((0,o.wg)(),(0,o.iD)("span",I,"کیلو")):((0,o.wg)(),(0,o.iD)("span",U,"بسته")),(0,o.Uk)(" ) ")]),q]),(0,o._)("div",O,[S,(0,o._)("button",{type:"button",class:"btn-black-rect my-3",onClick:t[3]||(t[3]=e=>l.removeOrderItem(l.remove?.id)),style:{width:"100px",height:"40px"},"data-bs-dismiss":"modal"},"تائید")])])])])],64)}var H=a(4870),L=a(65),B={name:"Profile",setup(){const e=(0,L.oR)(),t=(0,H.iH)(),a=(0,H.iH)([]),s=(0,H.iH)({});(0,o.bv)((()=>{c()}));const l=o=>{"cash"==t.value&&2==o?(document.querySelector(".activePaymentRadio").classList.remove("activePaymentRadio"),document.querySelector("#check").classList.add("activePaymentRadio"),t.value="check"):"check"==t.value&&1==o&&(document.querySelector(".activePaymentRadio").classList.remove("activePaymentRadio"),document.querySelector("#cash").classList.add("activePaymentRadio"),t.value="cash"),axios.post(e.state.panelUrl+"/api/order/"+a.value.id,{payment:t.value,status:"cart",payed:0}).then((e=>{console.log(e)})).catch((e=>console.error(e)))},c=()=>{axios.get(e.state.panelUrl+"/api/cart/"+JSON.parse(localStorage.getItem("user")).id).then((e=>{a.value=e.data})).then((()=>{console.log(a.value),t.value=a.value.pay})).catch((e=>{console.error(e)}))},i=()=>{axios.post(e.state.panelUrl+"/api/order/"+a.value.id,{payment:t.value,status:"in-progress",payed:0}).then((e=>{let t=new bootstrap.Modal(document.getElementById("confirm-order-modal"));t.show()})).catch((e=>console.error(e)))},n=()=>{window.location="/orders"},r=e=>{s.value=e,console.log(e);let t=new bootstrap.Modal(document.getElementById("remove-order-item-modal"));t.show()},d=t=>{axios.post(e.state.panelUrl+"/api/item/remove",{order_item_id:t}).then((e=>{c()})).catch((e=>{console.error(e)}))};return{paymentToggle:l,pay:t,store:e,getData:c,data:a,confirmOrder:i,reload:n,remove:s,showRemoveItemModal:r,removeOrderItem:d}}},M=a(89);const T=(0,M.Z)(B,[["render",j],["__scopeId","data-v-3beeb07e"]]);var E=T}}]);
//# sourceMappingURL=cart.f6ea9b40.js.map